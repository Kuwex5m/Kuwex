<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kuwex Dashboard</title>
  <link rel="icon" type="image/png" href="logo.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="dashboard">
    <img src="logo.png" alt="Kuwex Logo" class="logo" />
    <h2>Welcome to Kuwex</h2>
    <p id="userEmail"></p>

    <div class="motivation" id="motivationText">ðŸ’Ž Your money never sleeps â€” make it work for you!</div>

    <div class="info">
      <h3>How Kuwex Investment Works</h3>
      <p>
        Once you deposit, you instantly get a <b>10% cashback</b> that you can withdraw right away.  
        Minimum deposit is <b>Ksh 100</b>, no maximum.  
        Youâ€™ll complete daily tasks â€” watching ads, doing research, and watching videos â€” each rewarding you up to <b>15% daily</b>.  
        All task earnings are added to your balance and become withdrawable after <b>30 days</b>.  
        You may withdraw all or reinvest to continue growing.
      </p>
    </div>

    <div class="plans">
      <h3>Investment Plans</h3>
      <div class="plan">ðŸ’¼ Starter â€” Ksh 100 - Ksh 999</div>
      <div class="plan">ðŸš€ Premium â€” Ksh 1,000 - Ksh 9,999</div>
      <div class="plan">ðŸ‘‘ Elite â€” Ksh 10,000 and above</div>
    </div>

    <button id="investBtn">Deposit / Invest</button>
    <a href="progress.html" class="link">View Investment Progress</a>
    <button id="logoutBtn" class="logout">Logout</button>
  </div>

  <script type="module">
    import { auth } from './firebase.js';
    import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";

    const userEmail = document.getElementById('userEmail');
    const logoutBtn = document.getElementById('logoutBtn');
    const motivation = document.getElementById('motivationText');

    const messages = [
      "ðŸ’¡ Keep pushing â€” your success story starts here!",
      "ðŸ’° Smart investments, brighter tomorrow!",
      "ðŸ”¥ Consistency builds fortune â€” stay invested!",
      "ðŸŒ Your financial freedom journey begins now!"
    ];

    setInterval(() => {
      motivation.textContent = messages[Math.floor(Math.random() * messages.length)];
    }, 4000);

    onAuthStateChanged(auth, (user) => {
      if (user) userEmail.textContent = "Logged in as: " + (user.email || user.phoneNumber);
      else window.location.href = "index.html";
    });

    logoutBtn.addEventListener('click', async () => {
      await signOut(auth);
      window.location.href = "index.html";
    });

    document.getElementById('investBtn').onclick = () => window.location.href = 'progress.html';
  </script>
</body>
</html>
